#include <stdio.h>

int LFSR[31];

int x[100] = {1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0,
0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1,
1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1,
0, 1, 0, 0, 0, 1, 0, 1, 0, 1};

int gen_seq[100];

int main()
{
    int i,j,k,tmp,gen,test;
    int _t[32] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

    for(i=0;i<32;i++) {

        tmp = i;
        j = 31;

        while(j>=27) {
            if(tmp%2==0) {
                _t[j] = 0;
                tmp /= 2;
            }
            else if (tmp%2==1) {
                _t[j] = 1;
                tmp /= 2;
            }
            j--;
        }


        //printf("%d%d%d%d%d\n",_t[27],_t[28],_t[29],_t[30],_t[31]);

        int LFSR[31] = {_t[27]+_t[29]+_t[30],
                        1+_t[28]+_t[31],
                        _t[28]+_t[27]+_t[31],
                        1+_t[30]+_t[28]+_t[27],
                        _t[29]+_t[30],
                        _t[29],
                        1+_t[29]+_t[30]+_t[28],
                        _t[28]+_t[30],
                        _t[31],
                        _t[27]+_t[29]+_t[30]+_t[28],
                        0,
                        _t[31]+_t[28]+_t[29],
                        1+_t[27]+_t[29]+_t[30],
                        _t[29]+_t[30],
                        _t[31],
                        1+_t[27]+_t[28]+_t[31]+_t[29],
                        1+_t[27]+_t[31]+_t[30],
                        1+_t[27]+_t[29],
                        1+_t[29]+_t[31],
                        _t[27]+_t[28]+_t[31]+_t[29],
                        _t[27]+_t[28]+_t[29],
                        1+_t[28]+_t[29],
                        1+_t[28]+_t[31],
                        _t[27]+_t[28]+_t[30]+_t[31],
                        1+_t[27]+_t[28]+_t[29]+_t[30]+_t[31],
                        1+_t[27]+_t[28]+_t[29]+_t[30]+_t[31],
                        _t[27],
                        _t[28],
                        _t[29],
                        _t[30],
                        _t[31]};

        for(k=0;k<100;k++) {
            gen_seq[k] = (LFSR[0]*LFSR[1]+LFSR[5]+LFSR[6]+LFSR[30])%2;
            gen = (LFSR[27]+LFSR[30])%2;
            for(j=30;j>0;j--)
                LFSR[j] = LFSR[j-1];
            LFSR[0] = gen;
            //printf("%d",gen_seq[k]);
        }
        //printf("\n");

        test = 1;
        for(k=0;k<100;k++) {
            if(gen_seq[k]!=x[k])
                test = 0;
        }

        if(test==1) {
            printf("SOLUTION TROUVEE !!\n");
            printf("%d\n\n",i);
            printf("Generated sequence:\n\n");
            for(k=0;k<100;k++)
                printf("%d",gen_seq[k]);
            printf("\n\n");
            int SOLUTION[31] = {_t[27]+_t[29]+_t[30],
                        1+_t[28]+_t[31],
                        _t[28]+_t[27]+_t[31],
                        1+_t[30]+_t[28]+_t[27],
                        _t[29]+_t[30],
                        _t[29],
                        1+_t[29]+_t[30]+_t[28],
                        _t[28]+_t[30],
                        _t[31],
                        _t[27]+_t[29]+_t[30]+_t[28],
                        0,
                        _t[31]+_t[28]+_t[29],
                        1+_t[27]+_t[29]+_t[30],
                        _t[29]+_t[30],
                        _t[31],
                        1+_t[27]+_t[28]+_t[31]+_t[29],
                        1+_t[27]+_t[31]+_t[30],
                        1+_t[27]+_t[29],
                        1+_t[29]+_t[31],
                        _t[27]+_t[28]+_t[31]+_t[29],
                        _t[27]+_t[28]+_t[29],
                        1+_t[28]+_t[29],
                        1+_t[28]+_t[31],
                        _t[27]+_t[28]+_t[30]+_t[31],
                        1+_t[27]+_t[28]+_t[29]+_t[30]+_t[31],
                        1+_t[27]+_t[28]+_t[29]+_t[30]+_t[31],
                        _t[27],
                        _t[28],
                        _t[29],
                        _t[30],
                        _t[31]};
                printf("Initial state:\n\n");
                for(k=0;k<31;k++)
                    printf("%d",SOLUTION[k]%2);
                printf("\n");
        }
    }
    return 0;
}
